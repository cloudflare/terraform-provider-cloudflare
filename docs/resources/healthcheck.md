---
page_title: "cloudflare_healthcheck Resource - Cloudflare"
subcategory: ""
description: |-
  
---

# cloudflare_healthcheck (Resource)



## Example Usage

```terraform
# HTTPS Healthcheck
resource "cloudflare_healthcheck" "http_health_check" {
  zone_id     = var.cloudflare_zone_id
  name        = "http-health-check"
  description = "example http health check"
  address     = "example.com"
  suspended   = false
  check_regions = [
    "WEU",
    "EEU"
  ]
  type          = "HTTPS"
  port          = 443
  method        = "GET"
  path          = "/health"
  expected_body = "alive"
  expected_codes = [
    "2xx",
    "301"
  ]
  follow_redirects = true
  allow_insecure   = false
  header = [{
    header = "Host"
    values = ["example.com"]
  }]
  timeout               = 10
  retries               = 2
  interval              = 60
  consecutive_fails     = 3
  consecutive_successes = 2
}

# TCP Healthcheck
resource "cloudflare_healthcheck" "tcp_health_check" {
  zone_id     = var.cloudflare_zone_id
  name        = "tcp-health-check"
  description = "example tcp health check"
  address     = "example.com"
  suspended   = false
  check_regions = [
    "WEU",
    "EEU"
  ]
  type                  = "TCP"
  port                  = 22
  method                = "connection_established"
  timeout               = 10
  retries               = 2
  interval              = 60
  consecutive_fails     = 3
  consecutive_successes = 2
}
```
<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `address` (String) The hostname or IP address of the origin server to run health checks on.
- `name` (String) A short name to identify the health check. Only alphanumeric characters, hyphens and underscores are allowed.
- `zone_id` (String) Identifier

### Optional

- `check_regions` (List of String) A list of regions from which to run health checks. Null means Cloudflare will pick a default region.
- `consecutive_fails` (Number) The number of consecutive fails required from a health check before changing the health to unhealthy.
- `consecutive_successes` (Number) The number of consecutive successes required from a health check before changing the health to healthy.
- `description` (String) A human-readable description of the health check.
- `http_config` (Attributes) Parameters specific to an HTTP or HTTPS health check. (see [below for nested schema](#nestedatt--http_config))
- `interval` (Number) The interval between each health check. Shorter intervals may give quicker notifications if the origin status changes, but will increase load on the origin as we check from multiple locations.
- `retries` (Number) The number of retries to attempt in case of a timeout before marking the origin as unhealthy. Retries are attempted immediately.
- `suspended` (Boolean) If suspended, no health checks are sent to the origin.
- `tcp_config` (Attributes) Parameters specific to TCP health check. (see [below for nested schema](#nestedatt--tcp_config))
- `timeout` (Number) The timeout (in seconds) before marking the health check as failed.
- `type` (String) The protocol to use for the health check. Currently supported protocols are 'HTTP', 'HTTPS' and 'TCP'.

### Read-Only

- `created_on` (String)
- `failure_reason` (String) The current failure reason if status is unhealthy.
- `id` (String) Identifier
- `modified_on` (String)
- `status` (String) The current status of the origin server according to the health check.

<a id="nestedatt--http_config"></a>
### Nested Schema for `http_config`

Optional:

- `allow_insecure` (Boolean) Do not validate the certificate when the health check uses HTTPS.
- `expected_body` (String) A case-insensitive sub-string to look for in the response body. If this string is not found, the origin will be marked as unhealthy.
- `expected_codes` (List of String) The expected HTTP response codes (e.g. "200") or code ranges (e.g. "2xx" for all codes starting with 2) of the health check.
- `follow_redirects` (Boolean) Follow redirects if the origin returns a 3xx status code.
- `header` (Map of List of String) The HTTP request headers to send in the health check. It is recommended you set a Host header by default. The User-Agent header cannot be overridden.
- `method` (String) The HTTP method to use for the health check.
- `path` (String) The endpoint path to health check against.
- `port` (Number) Port number to connect to for the health check. Defaults to 80 if type is HTTP or 443 if type is HTTPS.


<a id="nestedatt--tcp_config"></a>
### Nested Schema for `tcp_config`

Optional:

- `method` (String) The TCP connection method to use for the health check.
- `port` (Number) Port number to connect to for the health check. Defaults to 80.

## Import

Import is supported using the following syntax:

```shell
# Use the Zone ID and Healthcheck ID to import.
$ terraform import cloudflare_healthcheck.example <zone_id>/<healthcheck_id>
```
