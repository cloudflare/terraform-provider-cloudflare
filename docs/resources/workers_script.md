---
page_title: "cloudflare_workers_script Resource - Cloudflare"
subcategory: ""
description: |-
  
---

# cloudflare_workers_script (Resource)



-> For more direct control over Workers resources, we recommend the beta `cloudflare_worker`, `cloudflare_worker_version`, and `cloudflare_workers_deployment` resources. See how to use them in the [developer documentation](https://developers.cloudflare.com/workers/platform/infrastructure-as-code/).


## Example Usage

```terraform
resource "cloudflare_workers_script" "example_workers_script" {
  account_id = "023e105f4ecef8ad9ca31a8372d0c353"
  script_name = "this-is_my_script-01"
  assets = {
    config = {
      headers = <<EOT
        /dashboard/*
        X-Frame-Options: DENY

        /static/*
        Access-Control-Allow-Origin: *
        EOT
      redirects = <<EOT
        /foo /bar 301
        /news/* /blog/:splat
        EOT
      html_handling = "auto-trailing-slash"
      not_found_handling = "none"
      run_worker_first = false
    }
    jwt = "jwt"
  }
  bindings = [{
    name = "MY_ENV_VAR"
    text = "my_data"
    type = "plain_text"
  }]
  compatibility_date = "2021-01-01"
  compatibility_flags = ["nodejs_compat"]
  content_file = "worker.js"
  content_sha256 = filesha256("worker.js")
  keep_assets = false
  keep_bindings = ["kv_namespace"]
  limits = {
    cpu_ms = 50
  }
  logpush = false
  main_module = "worker.js"
  migrations = {
    deleted_classes = ["string"]
    new_classes = ["string"]
    new_sqlite_classes = ["string"]
    new_tag = "v2"
    old_tag = "v1"
    renamed_classes = [{
      from = "from"
      to = "to"
    }]
    transferred_classes = [{
      from = "from"
      from_script = "from_script"
      to = "to"
    }]
  }
  observability = {
    enabled = true
    head_sampling_rate = 0.1
    logs = {
      enabled = true
      invocation_logs = true
      destinations = ["cloudflare"]
      head_sampling_rate = 0.1
      persist = true
    }
  }
  placement = {
    mode = "smart"
  }
  tail_consumers = [{
    service = "my-log-consumer"
    environment = "production"
    namespace = "my-namespace"
  }]
}
```
<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `account_id` (String) Identifier.
- `script_name` (String) Name of the script, used in URLs and route configuration.

### Optional

- `assets` (Attributes) Configuration for assets within a Worker. (see [below for nested schema](#nestedatt--assets))
- `bindings` (Attributes List) List of bindings attached to a Worker. You can find more about bindings on our docs: https://developers.cloudflare.com/workers/configuration/multipart-upload-metadata/#bindings. (see [below for nested schema](#nestedatt--bindings))
- `body_part` (String) Name of the uploaded file that contains the script (e.g. the file adding a listener to the `fetch` event). Indicates a `service worker syntax` Worker.
- `compatibility_date` (String) Date indicating targeted support in the Workers runtime. Backwards incompatible fixes to the runtime following this date will not affect this Worker.
- `compatibility_flags` (Set of String) Flags that enable or disable certain features in the Workers runtime. Used to enable upcoming features or opt in or out of specific changes not included in a `compatibility_date`.
- `content` (String) Module or Service Worker contents of the Worker. Conflicts with `content_file`.
- `content_file` (String) Path to a file containing the Module or Service Worker contents of the Worker. Conflicts with `content`. Must be paired with `content_sha256`.
- `content_sha256` (String) SHA-256 hash of the Worker contents. Used to trigger updates when source code changes. Must be provided when `content_file` is specified.
- `content_type` (String) Content-Type of the Worker. Required if uploading a non-JavaScript Worker (e.g. "text/x-python").
- `keep_assets` (Boolean) Retain assets which exist for a previously uploaded Worker version; used in lieu of providing a completion token.
- `keep_bindings` (Set of String) List of binding types to keep from previous_upload.
- `limits` (Attributes) Limits to apply for this Worker. (see [below for nested schema](#nestedatt--limits))
- `logpush` (Boolean) Whether Logpush is turned on for the Worker.
- `main_module` (String) Name of the uploaded file that contains the main module (e.g. the file exporting a `fetch` handler). Indicates a `module syntax` Worker.
- `migrations` (Attributes) Migrations to apply for Durable Objects associated with this Worker. (see [below for nested schema](#nestedatt--migrations))
- `observability` (Attributes) Observability settings for the Worker. (see [below for nested schema](#nestedatt--observability))
- `placement` (Attributes) Configuration for [Smart Placement](https://developers.cloudflare.com/workers/configuration/smart-placement). Specify either mode for Smart Placement, or one of region/hostname/host for targeted placement. (see [below for nested schema](#nestedatt--placement))
- `tail_consumers` (Attributes Set) List of Workers that will consume logs from the attached Worker. (see [below for nested schema](#nestedatt--tail_consumers))
- `usage_model` (String) Usage model for the Worker invocations.
Available values: "standard", "bundled", "unbound".

### Read-Only

- `created_on` (String) When the script was created.
- `etag` (String) Hashed script content, can be used in a If-None-Match header when updating.
- `handlers` (List of String) The names of handlers exported as part of the default export.
- `has_assets` (Boolean) Whether a Worker contains assets.
- `has_modules` (Boolean) Whether a Worker contains modules.
- `id` (String) Name of the script, used in URLs and route configuration.
- `last_deployed_from` (String) The client most recently used to deploy this Worker.
- `migration_tag` (String) The tag of the Durable Object migration that was most recently applied for this Worker.
- `modified_on` (String) When the script was last modified.
- `named_handlers` (Attributes List) Named exports, such as Durable Object class implementations and named entrypoints. (see [below for nested schema](#nestedatt--named_handlers))
- `startup_time_ms` (Number)

<a id="nestedatt--assets"></a>
### Nested Schema for `assets`

Optional:

- `config` (Attributes) Configuration for assets within a Worker. (see [below for nested schema](#nestedatt--assets--config))
- `directory` (String) Path to the directory containing asset files to upload.
- `jwt` (String, Sensitive) Token provided upon successful upload of all files from a registered manifest.

Read-Only:

- `asset_manifest_sha256` (String) The SHA-256 hash of the asset manifest of files to upload.

<a id="nestedatt--assets--config"></a>
### Nested Schema for `assets.config`

Optional:

- `headers` (String) The contents of a _headers file (used to attach custom headers on asset responses).
- `html_handling` (String) Determines the redirects and rewrites of requests for HTML content.
Available values: "auto-trailing-slash", "force-trailing-slash", "drop-trailing-slash", "none".
- `not_found_handling` (String) Determines the response when a request does not match a static asset, and there is no Worker script.
Available values: "none", "404-page", "single-page-application".
- `redirects` (String) The contents of a _redirects file (used to apply redirects or proxy paths ahead of asset serving).
- `run_worker_first` (Dynamic) When a boolean true, requests will always invoke the Worker script. Otherwise, attempt to serve an asset matching the request, falling back to the Worker script. When a list of strings, contains path rules to control routing to either the Worker or assets. Glob (*) and negative (!) rules are supported. Rules must start with either '/' or '!/'. At least one non-negative rule must be provided, and negative rules have higher precedence than non-negative rules.
- `serve_directly` (Boolean, Deprecated) When true and the incoming request matches an asset, that will be served instead of invoking the Worker script. When false, requests will always invoke the Worker script.



<a id="nestedatt--bindings"></a>
### Nested Schema for `bindings`

Required:

- `name` (String) A JavaScript variable name for the binding.
- `type` (String) The kind of resource that the binding provides.
Available values: "ai", "analytics_engine", "assets", "browser", "d1", "data_blob", "dispatch_namespace", "durable_object_namespace", "hyperdrive", "inherit", "images", "json", "kv_namespace", "mtls_certificate", "plain_text", "pipelines", "queue", "r2_bucket", "secret_text", "send_email", "service", "tail_consumer", "text_blob", "vectorize", "version_metadata", "secrets_store_secret", "secret_key", "workflow", "wasm_module".

Optional:

- `algorithm` (String) Algorithm-specific key parameters. [Learn more](https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/importKey#algorithm).
- `allowed_destination_addresses` (List of String) List of allowed destination addresses.
- `allowed_sender_addresses` (List of String) List of allowed sender addresses.
- `bucket_name` (String) R2 bucket to bind to.
- `certificate_id` (String) Identifier of the certificate to bind to.
- `class_name` (String) The exported class name of the Durable Object.
- `dataset` (String) The name of the dataset to bind to.
- `destination_address` (String) Destination address for the email.
- `environment` (String) The environment of the script_name to bind to.
- `format` (String) Data format of the key. [Learn more](https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/importKey#format).
Available values: "raw", "pkcs8", "spki", "jwk".
- `id` (String) Identifier of the D1 database to bind to.
- `index_name` (String) Name of the Vectorize index to bind to.
- `json` (String) JSON data to use.
- `jurisdiction` (String) The [jurisdiction](https://developers.cloudflare.com/r2/reference/data-location/#jurisdictional-restrictions) of the R2 bucket.
Available values: "eu", "fedramp".
- `key_base64` (String, Sensitive) Base64-encoded key data. Required if `format` is "raw", "pkcs8", or "spki".
- `key_jwk` (String, Sensitive) Key data in [JSON Web Key](https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/importKey#json_web_key) format. Required if `format` is "jwk".
- `namespace` (String) The name of the dispatch namespace.
- `namespace_id` (String) Namespace identifier tag.
- `old_name` (String) The old name of the inherited binding. If set, the binding will be renamed from `old_name` to `name` in the new version. If not set, the binding will keep the same name between versions.
- `outbound` (Attributes) Outbound worker. (see [below for nested schema](#nestedatt--bindings--outbound))
- `part` (String) The name of the file containing the data content. Only accepted for `service worker syntax` Workers.
- `pipeline` (String) Name of the Pipeline to bind to.
- `queue_name` (String) Name of the Queue to bind to.
- `script_name` (String) The script where the Durable Object is defined, if it is external to this Worker.
- `secret_name` (String) Name of the secret in the store.
- `service` (String) Name of Worker to bind to.
- `store_id` (String) ID of the store containing the secret.
- `text` (String, Sensitive) The text value to use.
- `usages` (Set of String) Allowed operations with the key. [Learn more](https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/importKey#keyUsages).
- `version_id` (String) Identifier for the version to inherit the binding from, which can be the version ID or the literal "latest" to inherit from the latest version. Defaults to inheriting the binding from the latest version.
- `workflow_name` (String) Name of the Workflow to bind to.

<a id="nestedatt--bindings--outbound"></a>
### Nested Schema for `bindings.outbound`

Optional:

- `params` (List of String) Pass information from the Dispatch Worker to the Outbound Worker through the parameters.
- `worker` (Attributes) Outbound worker. (see [below for nested schema](#nestedatt--bindings--outbound--worker))

<a id="nestedatt--bindings--outbound--worker"></a>
### Nested Schema for `bindings.outbound.worker`

Optional:

- `environment` (String) Environment of the outbound worker.
- `service` (String) Name of the outbound worker.




<a id="nestedatt--limits"></a>
### Nested Schema for `limits`

Optional:

- `cpu_ms` (Number) The amount of CPU time this Worker can use in milliseconds.


<a id="nestedatt--migrations"></a>
### Nested Schema for `migrations`

Optional:

- `deleted_classes` (List of String) A list of classes to delete Durable Object namespaces from.
- `new_classes` (List of String) A list of classes to create Durable Object namespaces from.
- `new_sqlite_classes` (List of String) A list of classes to create Durable Object namespaces with SQLite from.
- `new_tag` (String) Tag to set as the latest migration tag.
- `old_tag` (String) Tag used to verify against the latest migration tag for this Worker. If they don't match, the upload is rejected.
- `renamed_classes` (Attributes List) A list of classes with Durable Object namespaces that were renamed. (see [below for nested schema](#nestedatt--migrations--renamed_classes))
- `steps` (Attributes List) Migrations to apply in order. (see [below for nested schema](#nestedatt--migrations--steps))
- `transferred_classes` (Attributes List) A list of transfers for Durable Object namespaces from a different Worker and class to a class defined in this Worker. (see [below for nested schema](#nestedatt--migrations--transferred_classes))

<a id="nestedatt--migrations--renamed_classes"></a>
### Nested Schema for `migrations.renamed_classes`

Optional:

- `from` (String)
- `to` (String)


<a id="nestedatt--migrations--steps"></a>
### Nested Schema for `migrations.steps`

Optional:

- `deleted_classes` (List of String) A list of classes to delete Durable Object namespaces from.
- `new_classes` (List of String) A list of classes to create Durable Object namespaces from.
- `new_sqlite_classes` (List of String) A list of classes to create Durable Object namespaces with SQLite from.
- `renamed_classes` (Attributes List) A list of classes with Durable Object namespaces that were renamed. (see [below for nested schema](#nestedatt--migrations--steps--renamed_classes))
- `transferred_classes` (Attributes List) A list of transfers for Durable Object namespaces from a different Worker and class to a class defined in this Worker. (see [below for nested schema](#nestedatt--migrations--steps--transferred_classes))

<a id="nestedatt--migrations--steps--renamed_classes"></a>
### Nested Schema for `migrations.steps.renamed_classes`

Optional:

- `from` (String)
- `to` (String)


<a id="nestedatt--migrations--steps--transferred_classes"></a>
### Nested Schema for `migrations.steps.transferred_classes`

Optional:

- `from` (String)
- `from_script` (String)
- `to` (String)



<a id="nestedatt--migrations--transferred_classes"></a>
### Nested Schema for `migrations.transferred_classes`

Optional:

- `from` (String)
- `from_script` (String)
- `to` (String)



<a id="nestedatt--observability"></a>
### Nested Schema for `observability`

Required:

- `enabled` (Boolean) Whether observability is enabled for the Worker.

Optional:

- `head_sampling_rate` (Number) The sampling rate for incoming requests. From 0 to 1 (1 = 100%, 0.1 = 10%). Default is 1.
- `logs` (Attributes) Log settings for the Worker. (see [below for nested schema](#nestedatt--observability--logs))

<a id="nestedatt--observability--logs"></a>
### Nested Schema for `observability.logs`

Required:

- `enabled` (Boolean) Whether logs are enabled for the Worker.
- `invocation_logs` (Boolean) Whether [invocation logs](https://developers.cloudflare.com/workers/observability/logs/workers-logs/#invocation-logs) are enabled for the Worker.

Optional:

- `destinations` (List of String) A list of destinations where logs will be exported to.
- `head_sampling_rate` (Number) The sampling rate for logs. From 0 to 1 (1 = 100%, 0.1 = 10%). Default is 1.
- `persist` (Boolean) Whether log persistence is enabled for the Worker.



<a id="nestedatt--placement"></a>
### Nested Schema for `placement`

Optional:

- `mode` (String) Enables [Smart Placement](https://developers.cloudflare.com/workers/configuration/smart-placement).
Available values: "smart".

Read-Only:

- `host` (String) TCP host and port for targeted placement.
- `hostname` (String) HTTP hostname for targeted placement.
- `last_analyzed_at` (String) The last time the script was analyzed for [Smart Placement](https://developers.cloudflare.com/workers/configuration/smart-placement).
- `region` (String) Cloud region for targeted placement in format 'provider:region'.
- `status` (String) Status of [Smart Placement](https://developers.cloudflare.com/workers/configuration/smart-placement).
Available values: "SUCCESS", "UNSUPPORTED_APPLICATION", "INSUFFICIENT_INVOCATIONS".


<a id="nestedatt--tail_consumers"></a>
### Nested Schema for `tail_consumers`

Required:

- `service` (String) Name of Worker that is to be the consumer.

Optional:

- `environment` (String) Optional environment if the Worker utilizes one.
- `namespace` (String) Optional dispatch namespace the script belongs to.


<a id="nestedatt--named_handlers"></a>
### Nested Schema for `named_handlers`

Read-Only:

- `handlers` (List of String) The names of handlers exported as part of the named export.
- `name` (String) The name of the export.

## Import


Import is supported using the following syntax:

```shell
$ terraform import cloudflare_workers_script.example '<account_id>/<script_name>'
```
