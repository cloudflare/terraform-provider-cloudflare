---
page_title: "cloudflare_zero_trust_access_policy Resource - Cloudflare"
subcategory: ""
description: |-
  
---

# cloudflare_zero_trust_access_policy (Resource)



~> If 'application_id' is omitted, the policy created can be reused by multiple access applications.
   Any `cloudflare_zero_trust_access_application` resource can reference reusable policies through its `policies` argument.
   To destroy a reusable policy and remove it from all applications' policies lists on the same apply, preemptively set the
   lifecycle option `create_before_destroy` to true on the 'cloudflare_zero_trust_access_policy' resource.

## Example Usage

```terraform
resource "cloudflare_zero_trust_access_policy" "example_zero_trust_access_policy" {
  account_id = "023e105f4ecef8ad9ca31a8372d0c353"
  decision = "allow"
  include = [{
    group = {
      id = "aa0a4aab-672b-4bdb-bc33-a59f1130a11f"
    }
  }]
  name = "Allow devs"
  approval_groups = [{
    approvals_needed = 1
    email_addresses = ["test1@cloudflare.com", "test2@cloudflare.com"]
    email_list_uuid = "email_list_uuid"
  }, {
    approvals_needed = 3
    email_addresses = ["test@cloudflare.com", "test2@cloudflare.com"]
    email_list_uuid = "597147a1-976b-4ef2-9af0-81d5d007fc34"
  }]
  approval_required = true
  exclude = [{
    group = {
      id = "aa0a4aab-672b-4bdb-bc33-a59f1130a11f"
    }
  }]
  isolation_required = false
  purpose_justification_prompt = "Please enter a justification for entering this protected domain."
  purpose_justification_required = true
  require = [{
    group = {
      id = "aa0a4aab-672b-4bdb-bc33-a59f1130a11f"
    }
  }]
  session_duration = "24h"
}
```
<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `account_id` (String) Identifier.
- `decision` (String) The action Access will take if a user matches this policy. Infrastructure application policies can only use the Allow action.
Available values: "allow", "deny", "non_identity", "bypass".
- `include` (Attributes List) Rules evaluated with an OR logical operator. A user needs to meet only one of the Include rules. (see [below for nested schema](#nestedatt--include))
- `name` (String) The name of the Access policy.

### Optional

- `approval_groups` (Attributes List) Administrators who can approve a temporary authentication request. (see [below for nested schema](#nestedatt--approval_groups))
- `approval_required` (Boolean) Requires the user to request access from an administrator at the start of each session.
- `exclude` (Attributes List) Rules evaluated with a NOT logical operator. To match the policy, a user cannot meet any of the Exclude rules. (see [below for nested schema](#nestedatt--exclude))
- `isolation_required` (Boolean) Require this application to be served in an isolated browser for users matching this policy. 'Client Web Isolation' must be on for the account in order to use this feature.
- `purpose_justification_prompt` (String) A custom message that will appear on the purpose justification screen.
- `purpose_justification_required` (Boolean) Require users to enter a justification when they log in to the application.
- `require` (Attributes List) Rules evaluated with an AND logical operator. To match the policy, a user must meet all of the Require rules. (see [below for nested schema](#nestedatt--require))
- `session_duration` (String) The amount of time that tokens issued for the application will be valid. Must be in the format `300ms` or `2h45m`. Valid time units are: ns, us (or Âµs), ms, s, m, h.

### Read-Only

- `app_count` (Number) Number of access applications currently using this policy.
- `created_at` (String)
- `id` (String) The UUID of the policy
- `reusable` (Boolean)
- `updated_at` (String)

<a id="nestedatt--include"></a>
### Nested Schema for `include`

Optional:

- `any_valid_service_token` (Attributes) An empty object which matches on all service tokens. (see [below for nested schema](#nestedatt--include--any_valid_service_token))
- `auth_context` (Attributes) (see [below for nested schema](#nestedatt--include--auth_context))
- `auth_method` (Attributes) (see [below for nested schema](#nestedatt--include--auth_method))
- `azure_ad` (Attributes) (see [below for nested schema](#nestedatt--include--azure_ad))
- `certificate` (Attributes) (see [below for nested schema](#nestedatt--include--certificate))
- `common_name` (Attributes) (see [below for nested schema](#nestedatt--include--common_name))
- `device_posture` (Attributes) (see [below for nested schema](#nestedatt--include--device_posture))
- `email` (Attributes) (see [below for nested schema](#nestedatt--include--email))
- `email_domain` (Attributes) (see [below for nested schema](#nestedatt--include--email_domain))
- `email_list` (Attributes) (see [below for nested schema](#nestedatt--include--email_list))
- `everyone` (Attributes) An empty object which matches on all users. (see [below for nested schema](#nestedatt--include--everyone))
- `external_evaluation` (Attributes) (see [below for nested schema](#nestedatt--include--external_evaluation))
- `geo` (Attributes) (see [below for nested schema](#nestedatt--include--geo))
- `github_organization` (Attributes) (see [below for nested schema](#nestedatt--include--github_organization))
- `group` (Attributes) (see [below for nested schema](#nestedatt--include--group))
- `gsuite` (Attributes) (see [below for nested schema](#nestedatt--include--gsuite))
- `ip` (Attributes) (see [below for nested schema](#nestedatt--include--ip))
- `ip_list` (Attributes) (see [below for nested schema](#nestedatt--include--ip_list))
- `login_method` (Attributes) (see [below for nested schema](#nestedatt--include--login_method))
- `okta` (Attributes) (see [below for nested schema](#nestedatt--include--okta))
- `saml` (Attributes) (see [below for nested schema](#nestedatt--include--saml))
- `service_token` (Attributes) (see [below for nested schema](#nestedatt--include--service_token))

<a id="nestedatt--include--any_valid_service_token"></a>
### Nested Schema for `include.any_valid_service_token`


<a id="nestedatt--include--auth_context"></a>
### Nested Schema for `include.auth_context`

Required:

- `ac_id` (String) The ACID of an Authentication context.
- `id` (String) The ID of an Authentication context.
- `identity_provider_id` (String) The ID of your Azure identity provider.


<a id="nestedatt--include--auth_method"></a>
### Nested Schema for `include.auth_method`

Required:

- `auth_method` (String) The type of authentication method https://datatracker.ietf.org/doc/html/rfc8176#section-2.


<a id="nestedatt--include--azure_ad"></a>
### Nested Schema for `include.azure_ad`

Required:

- `id` (String) The ID of an Azure group.
- `identity_provider_id` (String) The ID of your Azure identity provider.


<a id="nestedatt--include--certificate"></a>
### Nested Schema for `include.certificate`


<a id="nestedatt--include--common_name"></a>
### Nested Schema for `include.common_name`

Required:

- `common_name` (String) The common name to match.


<a id="nestedatt--include--device_posture"></a>
### Nested Schema for `include.device_posture`

Required:

- `integration_uid` (String) The ID of a device posture integration.


<a id="nestedatt--include--email"></a>
### Nested Schema for `include.email`

Required:

- `email` (String) The email of the user.


<a id="nestedatt--include--email_domain"></a>
### Nested Schema for `include.email_domain`

Required:

- `domain` (String) The email domain to match.


<a id="nestedatt--include--email_list"></a>
### Nested Schema for `include.email_list`

Required:

- `id` (String) The ID of a previously created email list.


<a id="nestedatt--include--everyone"></a>
### Nested Schema for `include.everyone`


<a id="nestedatt--include--external_evaluation"></a>
### Nested Schema for `include.external_evaluation`

Required:

- `evaluate_url` (String) The API endpoint containing your business logic.
- `keys_url` (String) The API endpoint containing the key that Access uses to verify that the response came from your API.


<a id="nestedatt--include--geo"></a>
### Nested Schema for `include.geo`

Required:

- `country_code` (String) The country code that should be matched.


<a id="nestedatt--include--github_organization"></a>
### Nested Schema for `include.github_organization`

Required:

- `identity_provider_id` (String) The ID of your Github identity provider.
- `name` (String) The name of the organization.

Optional:

- `team` (String) The name of the team


<a id="nestedatt--include--group"></a>
### Nested Schema for `include.group`

Required:

- `id` (String) The ID of a previously created Access group.


<a id="nestedatt--include--gsuite"></a>
### Nested Schema for `include.gsuite`

Required:

- `email` (String) The email of the Google Workspace group.
- `identity_provider_id` (String) The ID of your Google Workspace identity provider.


<a id="nestedatt--include--ip"></a>
### Nested Schema for `include.ip`

Required:

- `ip` (String) An IPv4 or IPv6 CIDR block.


<a id="nestedatt--include--ip_list"></a>
### Nested Schema for `include.ip_list`

Required:

- `id` (String) The ID of a previously created IP list.


<a id="nestedatt--include--login_method"></a>
### Nested Schema for `include.login_method`

Required:

- `id` (String) The ID of an identity provider.


<a id="nestedatt--include--okta"></a>
### Nested Schema for `include.okta`

Required:

- `identity_provider_id` (String) The ID of your Okta identity provider.
- `name` (String) The name of the Okta group.


<a id="nestedatt--include--saml"></a>
### Nested Schema for `include.saml`

Required:

- `attribute_name` (String) The name of the SAML attribute.
- `attribute_value` (String) The SAML attribute value to look for.
- `identity_provider_id` (String) The ID of your SAML identity provider.


<a id="nestedatt--include--service_token"></a>
### Nested Schema for `include.service_token`

Required:

- `token_id` (String) The ID of a Service Token.



<a id="nestedatt--approval_groups"></a>
### Nested Schema for `approval_groups`

Required:

- `approvals_needed` (Number) The number of approvals needed to obtain access.

Optional:

- `email_addresses` (List of String) A list of emails that can approve the access request.
- `email_list_uuid` (String) The UUID of an re-usable email list.


<a id="nestedatt--exclude"></a>
### Nested Schema for `exclude`

Optional:

- `any_valid_service_token` (Attributes) An empty object which matches on all service tokens. (see [below for nested schema](#nestedatt--exclude--any_valid_service_token))
- `auth_context` (Attributes) (see [below for nested schema](#nestedatt--exclude--auth_context))
- `auth_method` (Attributes) (see [below for nested schema](#nestedatt--exclude--auth_method))
- `azure_ad` (Attributes) (see [below for nested schema](#nestedatt--exclude--azure_ad))
- `certificate` (Attributes) (see [below for nested schema](#nestedatt--exclude--certificate))
- `common_name` (Attributes) (see [below for nested schema](#nestedatt--exclude--common_name))
- `device_posture` (Attributes) (see [below for nested schema](#nestedatt--exclude--device_posture))
- `email` (Attributes) (see [below for nested schema](#nestedatt--exclude--email))
- `email_domain` (Attributes) (see [below for nested schema](#nestedatt--exclude--email_domain))
- `email_list` (Attributes) (see [below for nested schema](#nestedatt--exclude--email_list))
- `everyone` (Attributes) An empty object which matches on all users. (see [below for nested schema](#nestedatt--exclude--everyone))
- `external_evaluation` (Attributes) (see [below for nested schema](#nestedatt--exclude--external_evaluation))
- `geo` (Attributes) (see [below for nested schema](#nestedatt--exclude--geo))
- `github_organization` (Attributes) (see [below for nested schema](#nestedatt--exclude--github_organization))
- `group` (Attributes) (see [below for nested schema](#nestedatt--exclude--group))
- `gsuite` (Attributes) (see [below for nested schema](#nestedatt--exclude--gsuite))
- `ip` (Attributes) (see [below for nested schema](#nestedatt--exclude--ip))
- `ip_list` (Attributes) (see [below for nested schema](#nestedatt--exclude--ip_list))
- `login_method` (Attributes) (see [below for nested schema](#nestedatt--exclude--login_method))
- `okta` (Attributes) (see [below for nested schema](#nestedatt--exclude--okta))
- `saml` (Attributes) (see [below for nested schema](#nestedatt--exclude--saml))
- `service_token` (Attributes) (see [below for nested schema](#nestedatt--exclude--service_token))

<a id="nestedatt--exclude--any_valid_service_token"></a>
### Nested Schema for `exclude.any_valid_service_token`


<a id="nestedatt--exclude--auth_context"></a>
### Nested Schema for `exclude.auth_context`

Required:

- `ac_id` (String) The ACID of an Authentication context.
- `id` (String) The ID of an Authentication context.
- `identity_provider_id` (String) The ID of your Azure identity provider.


<a id="nestedatt--exclude--auth_method"></a>
### Nested Schema for `exclude.auth_method`

Required:

- `auth_method` (String) The type of authentication method https://datatracker.ietf.org/doc/html/rfc8176#section-2.


<a id="nestedatt--exclude--azure_ad"></a>
### Nested Schema for `exclude.azure_ad`

Required:

- `id` (String) The ID of an Azure group.
- `identity_provider_id` (String) The ID of your Azure identity provider.


<a id="nestedatt--exclude--certificate"></a>
### Nested Schema for `exclude.certificate`


<a id="nestedatt--exclude--common_name"></a>
### Nested Schema for `exclude.common_name`

Required:

- `common_name` (String) The common name to match.


<a id="nestedatt--exclude--device_posture"></a>
### Nested Schema for `exclude.device_posture`

Required:

- `integration_uid` (String) The ID of a device posture integration.


<a id="nestedatt--exclude--email"></a>
### Nested Schema for `exclude.email`

Required:

- `email` (String) The email of the user.


<a id="nestedatt--exclude--email_domain"></a>
### Nested Schema for `exclude.email_domain`

Required:

- `domain` (String) The email domain to match.


<a id="nestedatt--exclude--email_list"></a>
### Nested Schema for `exclude.email_list`

Required:

- `id` (String) The ID of a previously created email list.


<a id="nestedatt--exclude--everyone"></a>
### Nested Schema for `exclude.everyone`


<a id="nestedatt--exclude--external_evaluation"></a>
### Nested Schema for `exclude.external_evaluation`

Required:

- `evaluate_url` (String) The API endpoint containing your business logic.
- `keys_url` (String) The API endpoint containing the key that Access uses to verify that the response came from your API.


<a id="nestedatt--exclude--geo"></a>
### Nested Schema for `exclude.geo`

Required:

- `country_code` (String) The country code that should be matched.


<a id="nestedatt--exclude--github_organization"></a>
### Nested Schema for `exclude.github_organization`

Required:

- `identity_provider_id` (String) The ID of your Github identity provider.
- `name` (String) The name of the organization.

Optional:

- `team` (String) The name of the team


<a id="nestedatt--exclude--group"></a>
### Nested Schema for `exclude.group`

Required:

- `id` (String) The ID of a previously created Access group.


<a id="nestedatt--exclude--gsuite"></a>
### Nested Schema for `exclude.gsuite`

Required:

- `email` (String) The email of the Google Workspace group.
- `identity_provider_id` (String) The ID of your Google Workspace identity provider.


<a id="nestedatt--exclude--ip"></a>
### Nested Schema for `exclude.ip`

Required:

- `ip` (String) An IPv4 or IPv6 CIDR block.


<a id="nestedatt--exclude--ip_list"></a>
### Nested Schema for `exclude.ip_list`

Required:

- `id` (String) The ID of a previously created IP list.


<a id="nestedatt--exclude--login_method"></a>
### Nested Schema for `exclude.login_method`

Required:

- `id` (String) The ID of an identity provider.


<a id="nestedatt--exclude--okta"></a>
### Nested Schema for `exclude.okta`

Required:

- `identity_provider_id` (String) The ID of your Okta identity provider.
- `name` (String) The name of the Okta group.


<a id="nestedatt--exclude--saml"></a>
### Nested Schema for `exclude.saml`

Required:

- `attribute_name` (String) The name of the SAML attribute.
- `attribute_value` (String) The SAML attribute value to look for.
- `identity_provider_id` (String) The ID of your SAML identity provider.


<a id="nestedatt--exclude--service_token"></a>
### Nested Schema for `exclude.service_token`

Required:

- `token_id` (String) The ID of a Service Token.



<a id="nestedatt--require"></a>
### Nested Schema for `require`

Optional:

- `any_valid_service_token` (Attributes) An empty object which matches on all service tokens. (see [below for nested schema](#nestedatt--require--any_valid_service_token))
- `auth_context` (Attributes) (see [below for nested schema](#nestedatt--require--auth_context))
- `auth_method` (Attributes) (see [below for nested schema](#nestedatt--require--auth_method))
- `azure_ad` (Attributes) (see [below for nested schema](#nestedatt--require--azure_ad))
- `certificate` (Attributes) (see [below for nested schema](#nestedatt--require--certificate))
- `common_name` (Attributes) (see [below for nested schema](#nestedatt--require--common_name))
- `device_posture` (Attributes) (see [below for nested schema](#nestedatt--require--device_posture))
- `email` (Attributes) (see [below for nested schema](#nestedatt--require--email))
- `email_domain` (Attributes) (see [below for nested schema](#nestedatt--require--email_domain))
- `email_list` (Attributes) (see [below for nested schema](#nestedatt--require--email_list))
- `everyone` (Attributes) An empty object which matches on all users. (see [below for nested schema](#nestedatt--require--everyone))
- `external_evaluation` (Attributes) (see [below for nested schema](#nestedatt--require--external_evaluation))
- `geo` (Attributes) (see [below for nested schema](#nestedatt--require--geo))
- `github_organization` (Attributes) (see [below for nested schema](#nestedatt--require--github_organization))
- `group` (Attributes) (see [below for nested schema](#nestedatt--require--group))
- `gsuite` (Attributes) (see [below for nested schema](#nestedatt--require--gsuite))
- `ip` (Attributes) (see [below for nested schema](#nestedatt--require--ip))
- `ip_list` (Attributes) (see [below for nested schema](#nestedatt--require--ip_list))
- `login_method` (Attributes) (see [below for nested schema](#nestedatt--require--login_method))
- `okta` (Attributes) (see [below for nested schema](#nestedatt--require--okta))
- `saml` (Attributes) (see [below for nested schema](#nestedatt--require--saml))
- `service_token` (Attributes) (see [below for nested schema](#nestedatt--require--service_token))

<a id="nestedatt--require--any_valid_service_token"></a>
### Nested Schema for `require.any_valid_service_token`


<a id="nestedatt--require--auth_context"></a>
### Nested Schema for `require.auth_context`

Required:

- `ac_id` (String) The ACID of an Authentication context.
- `id` (String) The ID of an Authentication context.
- `identity_provider_id` (String) The ID of your Azure identity provider.


<a id="nestedatt--require--auth_method"></a>
### Nested Schema for `require.auth_method`

Required:

- `auth_method` (String) The type of authentication method https://datatracker.ietf.org/doc/html/rfc8176#section-2.


<a id="nestedatt--require--azure_ad"></a>
### Nested Schema for `require.azure_ad`

Required:

- `id` (String) The ID of an Azure group.
- `identity_provider_id` (String) The ID of your Azure identity provider.


<a id="nestedatt--require--certificate"></a>
### Nested Schema for `require.certificate`


<a id="nestedatt--require--common_name"></a>
### Nested Schema for `require.common_name`

Required:

- `common_name` (String) The common name to match.


<a id="nestedatt--require--device_posture"></a>
### Nested Schema for `require.device_posture`

Required:

- `integration_uid` (String) The ID of a device posture integration.


<a id="nestedatt--require--email"></a>
### Nested Schema for `require.email`

Required:

- `email` (String) The email of the user.


<a id="nestedatt--require--email_domain"></a>
### Nested Schema for `require.email_domain`

Required:

- `domain` (String) The email domain to match.


<a id="nestedatt--require--email_list"></a>
### Nested Schema for `require.email_list`

Required:

- `id` (String) The ID of a previously created email list.


<a id="nestedatt--require--everyone"></a>
### Nested Schema for `require.everyone`


<a id="nestedatt--require--external_evaluation"></a>
### Nested Schema for `require.external_evaluation`

Required:

- `evaluate_url` (String) The API endpoint containing your business logic.
- `keys_url` (String) The API endpoint containing the key that Access uses to verify that the response came from your API.


<a id="nestedatt--require--geo"></a>
### Nested Schema for `require.geo`

Required:

- `country_code` (String) The country code that should be matched.


<a id="nestedatt--require--github_organization"></a>
### Nested Schema for `require.github_organization`

Required:

- `identity_provider_id` (String) The ID of your Github identity provider.
- `name` (String) The name of the organization.

Optional:

- `team` (String) The name of the team


<a id="nestedatt--require--group"></a>
### Nested Schema for `require.group`

Required:

- `id` (String) The ID of a previously created Access group.


<a id="nestedatt--require--gsuite"></a>
### Nested Schema for `require.gsuite`

Required:

- `email` (String) The email of the Google Workspace group.
- `identity_provider_id` (String) The ID of your Google Workspace identity provider.


<a id="nestedatt--require--ip"></a>
### Nested Schema for `require.ip`

Required:

- `ip` (String) An IPv4 or IPv6 CIDR block.


<a id="nestedatt--require--ip_list"></a>
### Nested Schema for `require.ip_list`

Required:

- `id` (String) The ID of a previously created IP list.


<a id="nestedatt--require--login_method"></a>
### Nested Schema for `require.login_method`

Required:

- `id` (String) The ID of an identity provider.


<a id="nestedatt--require--okta"></a>
### Nested Schema for `require.okta`

Required:

- `identity_provider_id` (String) The ID of your Okta identity provider.
- `name` (String) The name of the Okta group.


<a id="nestedatt--require--saml"></a>
### Nested Schema for `require.saml`

Required:

- `attribute_name` (String) The name of the SAML attribute.
- `attribute_value` (String) The SAML attribute value to look for.
- `identity_provider_id` (String) The ID of your SAML identity provider.


<a id="nestedatt--require--service_token"></a>
### Nested Schema for `require.service_token`

Required:

- `token_id` (String) The ID of a Service Token.

## Import

Import is supported using the following syntax:

```shell
$ terraform import cloudflare_zero_trust_access_policy.example '<account_id>/<policy_id>'
```
