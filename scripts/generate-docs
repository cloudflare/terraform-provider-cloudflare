#!/usr/bin/env bash

set -e

cd -- "$(dirname -- "$0")/.."

echo "==> Generating Terraform provider documentation"

EXEC='tfplugindocs'
if ! command -v -- "$EXEC" &> /dev/null; then
  go install github.com/hashicorp/terraform-plugin-docs/cmd/tfplugindocs
  EXEC="$(go env -- GOPATH)/bin/$EXEC"
fi

case "$OSTYPE" in
linux*)
  export -- TMPDIR=/var/tmp
  ;;
*) ;;
esac

go mod tidy
exec -- "$EXEC" generate -rendered-provider-name "Cloudflare" -provider-name="cloudflare"
